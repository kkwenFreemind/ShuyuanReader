# æ›¸è‹‘é–±è®€å™¨ (ShuyuanReader)

ä¸€æ¬¾å°ˆç‚ºç¹é«”ä¸­æ–‡å¤ç±è¨­è¨ˆçš„ Flutter EPUB é–±è®€å™¨ APPï¼Œæ¡ç”¨å‰µæ–°çš„ã€ŒGitHub å…§å®¹è¨—ç®¡ + APP æœ¬åœ°ç·©å­˜ã€æ¶æ§‹ã€‚

## ğŸ’¡ æ ¸å¿ƒç‰¹é»

- ï¿½ **100+ ç¹é«”ä¸­æ–‡å¤ç±**ï¼šä½›ç¶“ã€é“æ•™ç¶“å…¸ã€å„’å®¶ç¶“å…¸ç­‰
- â˜ï¸ **GitHub è¨—ç®¡å…§å®¹**ï¼šæ‰€æœ‰é›»å­æ›¸å’Œå°é¢å­˜æ”¾åœ¨ GitHubï¼Œé›¶æœå‹™å™¨æˆæœ¬
- ï¿½ **æŒ‰éœ€ä¸‹è¼‰**ï¼šåªä¸‹è¼‰ç”¨æˆ¶éœ€è¦çš„æ›¸ç±ï¼Œç¯€çœç©ºé–“å’Œæµé‡
- ï¿½ **é›¢ç·šé–±è®€**ï¼šå·²ä¸‹è¼‰çš„æ›¸ç±å¯å®Œå…¨é›¢ç·šä½¿ç”¨
- ğŸ¨ **ç¾ä»£ UI**ï¼šMaterial Design + æµæš¢å‹•ç•«é«”é©—

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       GitHub Repository (å…§å®¹æº)            â”‚
â”‚  https://github.com/kkwenFreemind/        â”‚
â”‚  ShuyuanReader                             â”‚
â”‚                                            â”‚
â”‚  ğŸ“ catalog/books.json  â† æ›¸ç±å…ƒæ•¸æ“š(50KB)  â”‚
â”‚  ğŸ“ covers/*.png        â† 100+ å°é¢åœ–ç‰‡     â”‚
â”‚  ğŸ“ epub3/*.epub        â† 100+ é›»å­æ›¸       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“ HTTPS ä¸‹è¼‰
              â†“ æŒ‰éœ€ç²å–
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Flutter APP (æ™ºèƒ½ç·©å­˜å±¤)               â”‚
â”‚                                            â”‚
â”‚  ğŸ—„ï¸  Hive æ•¸æ“šåº«    â† æ›¸ç±å…ƒæ•¸æ“š + ç‹€æ…‹     â”‚
â”‚  ğŸ“¦  files/books/  â† ç”¨æˆ¶ä¸‹è¼‰çš„ EPUB       â”‚
â”‚  ğŸ–¼ï¸  cache/covers/ â† è‡ªå‹•ç·©å­˜çš„å°é¢         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ é …ç›®çµæ§‹

```
ShuyuanReader/
â”œâ”€â”€ app/                 # Flutter APP ä¸»ç¨‹å¼ç›®éŒ„
â”‚   â”œâ”€â”€ lib/            # æ‡‰ç”¨ç¨‹å¼æºä»£ç¢¼
â”‚   â”œâ”€â”€ android/        # Android å¹³å°é…ç½®
â”‚   â”œâ”€â”€ ios/            # iOS å¹³å°é…ç½®
â”‚   â””â”€â”€ pubspec.yaml    # Flutter ä¾è³´é…ç½®
â”‚
â”œâ”€â”€ catalog/            # æ›¸ç±æ¸…å–®ï¼ˆGitHub è¨—ç®¡ï¼‰
â”‚   â””â”€â”€ books.json     # æ‰€æœ‰æ›¸ç±çš„å…ƒæ•¸æ“šç›®éŒ„
â”‚
â”œâ”€â”€ covers/             # å°é¢åœ–æª”ï¼ˆGitHub è¨—ç®¡ï¼‰
â”‚   â”œâ”€â”€ ä¸€å¤¢æ¼«è¨€.png
â”‚   â”œâ”€â”€ ä¸‰ä¸–å› æœç›®è“®æ•‘æ¯ç¶“.png
â”‚   â””â”€â”€ ... (100+ å°é¢åœ–ç‰‡)
â”‚
â”œâ”€â”€ epub3/              # é›»å­æ›¸æ–‡ä»¶ï¼ˆGitHub è¨—ç®¡ï¼‰
â”‚   â”œâ”€â”€ ä¸€å¤¢æ¼«è¨€.epub
â”‚   â”œâ”€â”€ ä¸‰ä¸–å› æœç›®è“®æ•‘æ¯ç¶“.epub
â”‚   â””â”€â”€ ... (100+ EPUB æ–‡ä»¶)
â”‚
â”œâ”€â”€ doc/                # å®Œæ•´è¨­è¨ˆæ–‡æª”
â”‚   â”œâ”€â”€ README.md                    # æ–‡æª”å°è¦½
â”‚   â”œâ”€â”€ app_design_spec.md          # æŠ€è¡“è¨­è¨ˆè¦æ ¼
â”‚   â”œâ”€â”€ storage_architecture.md     # å„²å­˜æ¶æ§‹è¨­è¨ˆ
â”‚   â”œâ”€â”€ implementation_checklist.md # é–‹ç™¼æª¢æŸ¥æ¸…å–®
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ python/             # Python å·¥å…·ï¼ˆå…§å®¹ç®¡ç†ï¼‰
    â”œâ”€â”€ epub_processor.py      # EPUB è™•ç†å·¥å…·
    â”œâ”€â”€ run_processor.py       # æ‰¹æ¬¡è™•ç†è…³æœ¬
    â””â”€â”€ ...
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### ä½¿ç”¨è€…ï¼ˆé–±è®€æ›¸ç±ï¼‰

1. **ä¸‹è¼‰ä¸¦å®‰è£ APP**ï¼ˆå³å°‡æ¨å‡ºï¼‰
2. **ç€è¦½æ›¸ç±åˆ—è¡¨**ï¼šè‡ªå‹•å¾ GitHub è¼‰å…¥ 100+ æ›¸ç±
3. **ä¸‹è¼‰æƒ³é–±è®€çš„æ›¸ç±**ï¼šæŒ‰éœ€ä¸‹è¼‰ï¼Œç¯€çœç©ºé–“
4. **é–‹å§‹é–±è®€**ï¼šæ”¯æŒé›¢ç·šé–±è®€

### é–‹ç™¼è€…ï¼ˆé–‹ç™¼ APPï¼‰

è©³ç´°é–‹ç™¼æŒ‡å—è«‹åƒé–±ï¼š[doc/README.md](./doc/README.md)

#### ç’°å¢ƒéœ€æ±‚

- Flutter SDK 3.13+
- Android Studio / VS Code
- Android SDK (API 21+)
- Git

#### é–‹ç™¼æµç¨‹

```bash
# 1. å…‹éš†å€‰åº«
git clone https://github.com/kkwenFreemind/ShuyuanReader.git
cd ShuyuanReader

# 2. é€²å…¥ APP ç›®éŒ„
cd app

# 3. å®‰è£ä¾è³´
flutter pub get

# 4. é‹è¡Œ APP
flutter run
```

### å…§å®¹ç®¡ç†è€…ï¼ˆç®¡ç†é›»å­æ›¸ï¼‰

#### æ·»åŠ æ–°æ›¸ç±

```bash
# 1. è™•ç† EPUB æ–‡ä»¶ï¼ˆæå–å…ƒæ•¸æ“šå’Œå°é¢ï¼‰
cd python
python run_processor.py

# 2. æª¢æŸ¥çµæœ
python check_missing_covers.py

# 3. æäº¤åˆ° GitHub
git add catalog/books.json covers/*.png epub3/*.epub
git commit -m "feat: æ·»åŠ æ–°æ›¸ç±"
git push origin main
```

#### Python å·¥å…·åŠŸèƒ½

- **epub_processor.py**ï¼šæ‰¹æ¬¡è™•ç† EPUBï¼Œæå–å…ƒæ•¸æ“šå’Œå°é¢
- **check_missing_covers.py**ï¼šæª¢æŸ¥ç¼ºå°‘å°é¢çš„æ›¸ç±
- **inspect_problematic.py**ï¼šè¨ºæ–·æœ‰å•é¡Œçš„ EPUB æ–‡ä»¶

## ğŸ› ï¸ æŠ€è¡“æ£§

### Flutter APP

```yaml
dependencies:
  # ç‹€æ…‹ç®¡ç†
  get: ^4.6.6
  
  # ç¶²çµ¡è«‹æ±‚
  dio: ^5.3.3
  connectivity_plus: ^5.0.2
  
  # æœ¬åœ°å­˜å„²
  hive: ^2.2.3
  hive_flutter: ^1.1.0
  path_provider: ^2.1.1
  
  # å­˜å„²ç©ºé–“æª¢æ¸¬
  disk_space: ^0.2.1
  
  # EPUB é–±è®€
  epub_view: ^3.1.0
  
  # åœ–ç‰‡ç·©å­˜
  cached_network_image: ^3.3.0
  
  # UI çµ„ä»¶
  shimmer: ^3.0.0
  
  # å…¶ä»–å·¥å…·
  equatable: ^2.0.5
  package_info_plus: ^5.0.1
```

### Python å·¥å…·

- Python 3.6+
- æ¨™æº–åº«ï¼š`zipfile`ã€`xml.etree.ElementTree`ã€`json`ã€`pathlib`

### å…§å®¹è¨—ç®¡

- **å¹³å°**ï¼šGitHub Repository
- **CDN**ï¼šGitHub Raw Content
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šGit
- **æˆæœ¬**ï¼šå…è²» âœ…

## ğŸ“Š é …ç›®çµ±è¨ˆ

| é …ç›® | æ•¸æ“š |
|------|------|
| **æ›¸ç±æ•¸é‡** | 100+ æœ¬ |
| **æ›¸ç±æ ¼å¼** | EPUB 3.0 |
| **å°é¢æ ¼å¼** | PNG (400x600) |
| **ç¸½æ–‡ä»¶å¤§å°** | ~200-500 MB |
| **books.json** | ~50 KB |
| **å–®æœ¬ EPUB** | 1-5 MB |
| **å–®å¼µå°é¢** | 50-200 KB |
| **APP åˆå§‹å¤§å°** | ~20 MBï¼ˆä¸å«æ›¸ç±ï¼‰|
| **å·²å®Œæˆ Spec** | 3/6 (50%) |
| **ä»£ç¢¼è¡Œæ•¸** | ~3000+ è¡Œ |

## ğŸ“š æ›¸ç±ç›®éŒ„çµæ§‹

```json
{
  "metadata": {
    "title": "æ›¸è‹‘é–±è®€å™¨æ›¸ç›®",
    "description": "è‡ªå‹•ç”Ÿæˆçš„æ›¸ç±ç›®éŒ„",
    "generated_at": "2025-11-06",
    "total_books": 100
  },
  "books": [
    {
      "id": "é‡‘å‰›ç¶“",
      "title": "é‡‘å‰›ç¶“",
      "author": "é³©æ‘©ç¾…ä»€è­¯",
      "language": "zh-Hant",
      "description": "ä½›æ•™èˆ¬è‹¥é¡ç¶“å…¸",
      "epubUrl": "epub3/é‡‘å‰›ç¶“.epub",
      "coverUrl": "covers/é‡‘å‰›ç¶“.png"
    }
  ]
}
```

## ğŸ¯ æœ€æ–°é€²å±•

### âœ… Spec 03: æ›¸ç±è©³æƒ…é  (2025-11-08 å®Œæˆ)

å®Œæ•´å¯¦ç¾æ›¸ç±è©³æƒ…é çš„æ‰€æœ‰åŠŸèƒ½ï¼ŒåŒ…æ‹¬ä¸‹è¼‰ç®¡ç†ã€UI å„ªåŒ–å’ŒéŒ¯èª¤è™•ç†ï¼š

#### æ ¸å¿ƒåŠŸèƒ½
- **ä¸‹è¼‰ç®¡ç†**
  - é–‹å§‹/æš«åœ/å–æ¶ˆä¸‹è¼‰æ“ä½œ
  - å¯¦æ™‚ä¸‹è¼‰é€²åº¦è¿½è¹¤ (0-100%)
  - æ–·é»çºŒå‚³æ”¯æŒ
  - ç¶²çµ¡é€£æ¥æª¢æŸ¥ (WiFi/ç§»å‹•æ•¸æ“š)
  - å­˜å„²ç©ºé–“æª¢æŸ¥ (æœ€å°‘ 50MB)

- **æ›¸ç±ç®¡ç†**
  - åˆªé™¤å·²ä¸‹è¼‰æ›¸ç± (å«ç¢ºèªå°è©±æ¡†)
  - æ‰“é–‹é–±è®€å™¨å°èˆª
  - æœ¬åœ°æ–‡ä»¶è·¯å¾‘ç®¡ç†

- **UI/UX å„ªåŒ–**
  - Hero å‹•ç•«è½‰å ´æ•ˆæœ
  - éŸ¿æ‡‰å¼ä½ˆå±€ (æ‰‹æ©Ÿ/å¹³æ¿é©é…)
  - Material Design 3 ä¸»é¡Œç³»çµ±
  - æµæš¢çš„ç‹€æ…‹è½‰æ›å‹•ç•«
  - 8px åŸºç¤é–“è·ç³»çµ±

- **éŒ¯èª¤è™•ç†**
  - å‹å¥½çš„éŒ¯èª¤æç¤ºæ–‡æ¡ˆ (å« Emoji ğŸ“¡ğŸ’¾âŒâœ…)
  - é¡è‰²ç·¨ç¢¼åé¥‹ (æˆåŠŸ/è­¦å‘Š/éŒ¯èª¤)
  - å…·é«”å¯æ“ä½œçš„å»ºè­°
  - å®Œå–„çš„ç•°å¸¸è™•ç†æ©Ÿåˆ¶

#### æŠ€è¡“äº®é»
- **GetX ç‹€æ…‹ç®¡ç†**ï¼šéŸ¿æ‡‰å¼ç‹€æ…‹æ›´æ–°
- **ä¾è³´æ³¨å…¥**ï¼šè§£è€¦çš„æœå‹™æ¶æ§‹
- **è‡ªå®šç¾©ç•°å¸¸**ï¼šç²¾ç¢ºçš„éŒ¯èª¤è¿½è¹¤
- **é€£æ¥æª¢æ¸¬**ï¼šconnectivity_plus é›†æˆ
- **ç©ºé–“ç®¡ç†**ï¼šdisk_space é›†æˆ

#### æ–‡ä»¶çµæ§‹
```
lib/presentation/
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ book_detail_page.dart (604 è¡Œ)
â””â”€â”€ controllers/
    â””â”€â”€ book_detail_controller.dart (467 è¡Œ)
```

#### æäº¤è¨˜éŒ„
- `3a24437` - å„ªåŒ–å‹•ç•«æ•ˆæœ (Task 3.8.1)
- `4e3956d` - å„ªåŒ–ä½ˆå±€å’Œé–“è· (Task 3.8.2)
- `f712bd7` - å„ªåŒ–é¡è‰²å’Œå­—é«” (Task 3.8.3)
- `2156b83` - æ”¹é€²éŒ¯èª¤æç¤ºæ–‡æ¡ˆ (Task 3.9.1)
- `d19bf8e` - æ·»åŠ ç¶²çµ¡æª¢æŸ¥ (Task 3.9.2)
- `5e84105` - æ·»åŠ å­˜å„²ç©ºé–“æª¢æŸ¥ (Task 3.9.3)

è©³ç´°æ–‡æª”ï¼š[specs/03-book-detail-tasks.md](./app/specs/03-book-detail-tasks.md)

---

## ğŸ“ˆ é–‹ç™¼è·¯ç·šåœ–

### Phase 1: åŸºç¤æ¶æ§‹ âœ…

- âœ… åŸºç¤æ¶æ§‹è¨­è¨ˆ
- âœ… å­˜å„²æ¶æ§‹è¨­è¨ˆ
- âœ… Flutter é …ç›®å‰µå»º
- âœ… ä¾è³´é…ç½®èˆ‡ç’°å¢ƒæ­å»º

### Phase 2: æ›¸ç±åˆ—è¡¨é  (Spec 02) âœ…

- âœ… ç¶²çµ¡å±¤å¯¦ç¾ (Dio + éŒ¯èª¤è™•ç†)
- âœ… æ›¸ç±åˆ—è¡¨ UI (Material Design 3)
- âœ… æ›¸ç±å¡ç‰‡çµ„ä»¶è¨­è¨ˆ
- âœ… ä¸‹è¼‰ç‹€æ…‹æ¨™è­˜
- âœ… éŸ¿æ‡‰å¼ä½ˆå±€

### Phase 3: æ›¸ç±è©³æƒ…é  (Spec 03) âœ…

- âœ… æ›¸ç±è©³æƒ…é  UI (éŸ¿æ‡‰å¼è¨­è¨ˆ)
- âœ… ä¸‹è¼‰ç®¡ç†åŠŸèƒ½
  - âœ… é–‹å§‹/æš«åœ/å–æ¶ˆä¸‹è¼‰
  - âœ… ä¸‹è¼‰é€²åº¦è¿½è¹¤
  - âœ… ç¶²çµ¡é€£æ¥æª¢æŸ¥
  - âœ… å­˜å„²ç©ºé–“æª¢æŸ¥
- âœ… å·²ä¸‹è¼‰æ›¸ç±ç®¡ç†
  - âœ… åˆªé™¤åŠŸèƒ½ (å«ç¢ºèªå°è©±æ¡†)
  - âœ… æ‰“é–‹é–±è®€å™¨å°èˆª
- âœ… UI å„ªåŒ–
  - âœ… Hero å‹•ç•«æ•ˆæœ
  - âœ… éŸ¿æ‡‰å¼ä½ˆå±€èˆ‡é–“è·
  - âœ… Material Design 3 ä¸»é¡Œ
  - âœ… å‹å¥½éŒ¯èª¤æç¤º

### Phase 4: EPUB é–±è®€å™¨ (Spec 04) ğŸš§

- â¬œ EPUB é–±è®€å™¨é›†æˆ
- â¬œ é–±è®€é€²åº¦ä¿å­˜
- â¬œ æ›¸ç±¤åŠŸèƒ½
- â¬œ é–±è®€è¨­ç½®ï¼ˆå­—é«”ã€èƒŒæ™¯ï¼‰

### Phase 5: åŠŸèƒ½å¢å¼·

- â¬œ æœç´¢å’Œéæ¿¾
- â¬œ åˆ†é¡ç€è¦½
- â¬œ ç­†è¨˜åŠŸèƒ½
- â¬œ æ€§èƒ½å„ªåŒ–

### Phase 6: ç™¼å¸ƒæº–å‚™

- â¬œ å¤šèªè¨€æ”¯æŒ
- â¬œ éš±ç§æ”¿ç­–
- â¬œ Google Play ä¸Šæ¶

## ğŸ¤ è²¢ç»æŒ‡å—

æ­¡è¿è²¢ç»ï¼è«‹åƒé–± [doc/README.md](./doc/README.md) äº†è§£å®Œæ•´çš„é–‹ç™¼æŒ‡å—ã€‚

### å¦‚ä½•æ·»åŠ æ–°æ›¸ç±

1. å°‡ EPUB æ–‡ä»¶æ”¾å…¥ `epub3/` ç›®éŒ„
2. é‹è¡Œ Python å·¥å…·è™•ç†ï¼š`python python/run_processor.py`
3. æª¢æŸ¥ç”Ÿæˆçš„å°é¢å’Œ `catalog/books.json`
4. æäº¤åˆ° Gitï¼š`git add . && git commit -m "feat: æ·»åŠ æ–°æ›¸ç±" && git push`
5. APP æœƒè‡ªå‹•æª¢æ¸¬æ›´æ–° âœ¨

## ğŸ“„ æ–‡æª”

å®Œæ•´çš„è¨­è¨ˆæ–‡æª”ä½æ–¼ [doc/](./doc/) ç›®éŒ„ï¼š

- [README.md](./doc/README.md) - æ–‡æª”å°è¦½ï¼ˆå¿…è®€ï¼‰
- [storage_architecture.md](./doc/storage_architecture.md) - å­˜å„²æ¶æ§‹è¨­è¨ˆ
- [app_design_spec.md](./doc/app_design_spec.md) - APP æŠ€è¡“è¨­è¨ˆ
- [implementation_checklist.md](./doc/implementation_checklist.md) - é–‹ç™¼æª¢æŸ¥æ¸…å–®

## ğŸ“§ è¯ç¹«æ–¹å¼

- **GitHub**: [kkwenFreemind/ShuyuanReader](https://github.com/kkwenFreemind/ShuyuanReader)
- **Issues**: [æäº¤å•é¡Œ](https://github.com/kkwenFreemind/ShuyuanReader/issues)

## ğŸ“„ æˆæ¬Š

MIT License

æ›¸ç±å…§å®¹ç‰ˆæ¬Šæ­¸åŸä½œè€…æ‰€æœ‰ï¼Œåƒ…ä¾›å­¸ç¿’å’Œç ”ç©¶ä½¿ç”¨ã€‚
